<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Collection">

	<select id="selectCollectionForOne" parameterType="zh.co.item.bank.model.entity.ExamModel"
		resultType="zh.co.item.bank.db.entity.TbCollectionBean">
		select * from `tb_collection`
		where id = #{userId} and
		question_id = #{no}
	</select>

	<!-- 批量插入做题记录 -->
	<insert id="insertCollections" parameterType="zh.co.item.bank.db.entity.TbCollectionBean">
		insert into tb_collection (
		        id,
				question_id,
				finish)
		values 
		<foreach collection="list" item="item" index="index" separator=",">
					(#{item.id,jdbcType=INTEGER},
					#{item.questionId,jdbcType=INTEGER},
					#{item.finish,jdbcType=CHAR})
		</foreach>
	</insert>

	<update id="updateCollection" parameterType="zh.co.item.bank.db.entity.TbCollectionBean">
		update tb_collection
		<set>
			<if test="finish != null">
				finish = #{finish,jdbcType=CHAR},
			</if>
			update_time = SYSDATE()
		</set>
		where id = #{id,jdbcType=SMALLINT}
		and question_id =
		#{questionId,jdbcType=SMALLINT}
	</update>

</mapper>