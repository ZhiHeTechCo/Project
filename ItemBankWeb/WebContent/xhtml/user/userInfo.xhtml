<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core">
<ui:composition template="../../xhtml/common/template.xhtml">
  <ui:define name="content">
    <h:outputScript library="javax.faces" name="jsf.js" target="head" />
    <div style="width: 100%; overflow: auto; overflow-x: hidden;">
      <h:form id="userInfoform">
        <div class="typrography">
          <h2 style="text-align: center;">个人信息</h2>
          <div class="container">
            <div class="bs-docs-example">
	          <h:panelGroup id="ngossfw_error_display" class="#{request.getAttribute('request-message-level')}"
	            layout="block">
	            <h:outputText value="${request.getAttribute('request-message-content')}" escape="false" />
	          </h:panelGroup>
              <table class="to table table-striped;">
                <tr>
                  <td style="width:35%;"><h4>用户名</h4></td>
                  <td>
                    <c:choose>
                      <c:when test="#{userInfoBean.userInfo.wechat eq '1'}">
                        <h:outputText value="微信用户_#{userInfoBean.userInfo.nickName}" />
                      </c:when>
                      <c:otherwise>
                        <h:outputText value="#{userInfoBean.userInfo.name}" />
                      </c:otherwise>
                    </c:choose>
                  </td>
                </tr>
                <tr>
                  <td><h4>做题数</h4></td>
                  <td><h:outputText value="#{userInfoBean.userInfo.questionNum}" /></td>
                </tr>
                <tr>
                  <td><h4>错题数</h4></td>
                  <td><h:outputText value="#{userInfoBean.userInfo.errorNum}" /></td>
                </tr>
                <!-- 
                <tr>
                  <td><h4>积分</h4></td>
                  <td><h:outputText value="#{userInfoBean.userInfo.point}" /></td>
                </tr>-->
                <tr>
                  <td><h4>用户等级</h4></td>
                  <td>LV. <h:outputText value="#{userInfoBean.userInfo.role}" />
                  </td>
                </tr>
                <tr>
                  <td><h4>注册日期</h4></td>
                  <td><h:outputText value="#{userInfoBean.userInfo.createTime}" >
                        <f:convertDateTime pattern="yyyy年MM月dd日" timeZone="GMT+8"/>
                      </h:outputText>
                  </td>
                </tr>
                <tr>
                  <td><h4>昵称</h4></td>
                  <td><h:inputText value="#{userInfoBean.userInfo.nickName}"
                       maxlength="30" style="width:60%;"/></td>
                </tr>         
                <tr>
                  <td><h4>邮箱</h4></td>
                  <td><h:inputText value="#{userInfoBean.userInfo.email}"
                       maxlength="30" style="width:60%;"/></td>
                </tr>
                <tr>
                  <td><h4>手机</h4></td>
                  <td><h:inputText value="#{userInfoBean.userInfo.telephone}"
                       maxlength="11" style="width:60%;"/></td>
                </tr>
                <tr>
                  <td><h4>生日</h4></td>
                  <td><h:inputText maxlength="10" value="#{userInfoBean.userInfo.birthdayEx}" style="width: 100px; "
                      class="calendar" /></td>
                </tr>
                <tr>
                  <td><h4>日语等级（JLTP）</h4></td>
                  <td><h:selectOneMenu value="#{userInfoBean.userInfo.jlptLevel}">
                      <f:selectItem itemValue="" itemLabel="" />
                      <f:selectItems value="#{userInfoBean.jlptLevels}" var="entry" itemValue="#{entry.key}"
                        itemLabel="#{entry.value}" />
                    </h:selectOneMenu></td>
                </tr>
                <tr>
                  <td><h4>日语等级（J.TEST）</h4></td>
                  <td><h:selectOneMenu value="#{userInfoBean.userInfo.jtestLevel}">
                      <f:selectItem itemValue="" itemLabel="" />
                      <f:selectItems value="#{userInfoBean.jtestLevels}" var="entry" itemValue="#{entry.key}"
                        itemLabel="#{entry.value}" />
                    </h:selectOneMenu></td>
                </tr>
                <tr><td colspan="2"><h5><span class="glyphicon glyphicon-info-sign"></span> 当前等级请填写待考等级。</h5></td></tr>
              </table>
              <div class="form-submit1">
                  <h:commandButton id="updateInfoBtn" value="更新信息" 
                      action="#{userInfoBean.updateUserInfo}" style="margin-right: 5px;"/>
              </div>
              <div class="form-submit1">
                  <h:commandButton id="changePasswordBtn" value="更换密码" 
                      action="#{userInfoBean.changePassword}" style="margin-right: 5px;"/>
              </div>
              <div class="form-submit1">
                  <h:commandButton id="toExamBtn" value="去试题库" 
                      action="#{userInfoBean.toExam}" style="margin-right: 5px;"/>
              </div>
              <div class="form-submit1">
                  <h:commandButton id="toResumeBtn" value="去错题库" 
                      action="#{userInfoBean.toResume}" style="margin-right: 5px;"/>
              </div>
            </div>
          </div>
        </div>
      </h:form>
    </div>
  </ui:define>
</ui:composition>
</html>
